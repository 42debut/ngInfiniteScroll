/*
 * jQuery Foundation Magellan 0.0.1
 * http://foundation.zurb.com
 * Copyright 2012, ZURB
 * Free to use under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
*/
!function(a,t){"use strict";a.fn.foundationMagellan=function(l){var e=a("[data-magellan-expedition=fixed]"),n={threshold:e.length?e.outerHeight(!0):25,activeClass:"active"},l=a.extend({},n,l);a(document).on("magellan.arrival","[data-magellan-arrival]",function(){var t=a(this).closest("[data-magellan-expedition]"),e=t.attr("data-magellan-active-class")||l.activeClass;a(this).closest("[data-magellan-expedition]").find("[data-magellan-arrival]").not(this).removeClass(e),a(this).addClass(e)});var i=a("[data-magellan-expedition]");i.find("[data-magellan-arrival]:first").addClass(i.attr("data-magellan-active-class")||l.activeClass),e.on("magellan.update-position",function(){var t=a(this);t.data("magellan-fixed-position",""),t.data("magellan-top-offset","")}),e.trigger("magellan.update-position"),a(t).on("resize.magellan",function(){e.trigger("magellan.update-position")}),a(t).on("scroll.magellan",function(){var n=a(t).scrollTop();e.each(function(){var t=a(this);""===t.data("magellan-top-offset")&&t.data("magellan-top-offset",t.offset().top);var e=n+l.threshold>t.data("magellan-top-offset");t.data("magellan-fixed-position")!=e&&(t.data("magellan-fixed-position",e),e?t.css({position:"fixed",top:0}):t.css({position:"",top:""}))})}),a(t).on("scroll.magellan",function(){var e=a(t).scrollTop();a("[data-magellan-destination]").each(function(){var t=a(this),n=t.attr("data-magellan-destination"),i=t.offset().top-e;i<=l.threshold&&a("[data-magellan-arrival="+n+"]").trigger("magellan.arrival")})})}}(jQuery,this);